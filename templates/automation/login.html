{% extends "automation/base.html" %}

{% block title %}
<title>DataFlow | Login</title>
{% endblock %}

{% block body %}
<div class="container d-flex justify-content-center align-items-center" style="min-height: 80vh;">
  <div class="card shadow-lg p-5" style="width: 400px;">
    <h2 class="text-center text-primary mb-4">Login to DataFlow</h2>
    {% include 'automation/alerts.html' %}
    <form method="POST">
      {% csrf_token %}

      <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <input type="email" class="form-control" id="email" name="email" required>
      </div>

      <div class="mb-3 position-relative">
        <label for="password" class="form-label">Password</label>
        <input type="password" class="form-control" id="password" name="password" required>
        <span class="position-absolute" style="right: 10px; top: 35px; cursor: pointer;">
          <i class="bi bi-eye-slash" id="togglePassword"></i>
        </span>
      </div>

      <div class="d-flex justify-content-between align-items-center mb-3">
        <div>
          <input type="checkbox" id="remember" name="remember">
          <label for="remember">Remember me</label>
        </div>
        <a href="#" class="text-decoration-none text-primary">Forgot password?</a>
      </div>

      <div class="text-center">
        <button type="submit" class="btn btn-primary w-100">Login</button>
      </div>
    </form>

    <p class="text-center mt-4">
      Don't have an account? <a href="{% url 'signup' %}" class="text-primary text-decoration-none">Sign up</a>
    </p>
  </div>
</div>

<!-- Include Bootstrap Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css">

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const togglePassword = document.getElementById('togglePassword');
    const password = document.getElementById('password');

    togglePassword.addEventListener('click', function () {
      const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
      password.setAttribute('type', type);
      this.classList.toggle('bi-eye');
      this.classList.toggle('bi-eye-slash');
    });
  });
</script>

{% endblock %}
